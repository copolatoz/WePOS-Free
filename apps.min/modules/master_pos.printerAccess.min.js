/**
 * Filename: master_pos.printerAccess.js
 * Generated 2017-12-05 at 08:43:20 PM
 */
Ext.define('ExtApp.modules.master_pos.model.model_printerAccess',{extend:'Ext.data.Model',alias:'model_printerAccess',fields:[{name:'id',type:'string'},{name:'old_user_ip',type:'string'},{name:'old_var_name',type:'string'},{name:'user_ip',type:'string'},{name:'var_name',type:'string'},{name:'do_print',type:'string'},{name:'do_print_text',type:'string'},{name:'printer_pin',type:'string'},{name:'printer_tipe',type:'string'},{name:'printer_ip',type:'string'},{name:'printer_id',type:'int'},{name:'printer_name',type:'string'}],proxy:{type:'ajax',url:appUrl+'master_pos/printerAccess/gridData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.master_pos.model.model_masterPrinter',{extend:'Ext.data.Model',alias:'model_masterPrinter',fields:[{name:'id',type:'int'},{name:'printer_name',type:'string'},{name:'printer_ip',type:'string'},{name:'printer_tipe',type:'string'},{name:'printer_pin',type:'string'},{name:'is_print_anywhere',type:'int'},{name:'is_print_anywhere_text',type:'string'},{name:'is_active',type:'int'},{name:'is_active_text',type:'string'}],proxy:{type:'ajax',url:appUrl+'master_pos/masterPrinter/gridData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.master_pos.store.store_printerAccess',{extend:'Ext.data.Store',model:'ExtApp.modules.master_pos.model.model_printerAccess',autoLoad:false,remoteSort:true});Ext.define('ExtApp.modules.master_pos.store.store_masterPrinter',{extend:'Ext.data.Store',model:'ExtApp.modules.master_pos.model.model_masterPrinter',autoLoad:false,remoteSort:true});Ext.define('ExtApp.modules.master_pos.store.store_varPrint',{extend:'Ext.data.Store',fields:['val','name'],data:[{"val":"cashierReceipt","name":"Cashier Receipt"},{"val":"qcReceipt","name":"QC Receipt"},{"val":"barReceipt","name":"Bar Receipt"},{"val":"kitchenReceipt","name":"Kitchen Receipt"},{"val":"otherReceipt","name":"Other Receipt"}],autoLoad:false});Ext.define("ExtApp.modules.master_pos.view.printerAccess",{openWindow:function(me){var theApp=me.app;var desktop=theApp.getDesktop();var store_printerAccess=theApp.getStore('master_pos.store_printerAccess');var helperGrid=theApp.getHelper('Grid');var selModel_printerAccess=Ext.create('Ext.selection.CheckboxModel',{listeners:{selectionchange:function(sm,selections){Ext.getCmp('grid_printerAccess').down('#deleteButton_printerAccess').setDisabled(selections.length==0);}}});return desktop.createWindow({id:me.id,title:'Printer Access',width:800,height:480,iconCls:'icon-grid',animCollapse:false,constrainHeader:true,resizable:true,maximized:false,border:0,layout:{type:'fit'},items:[{xtype:'gridpanel',margins:'0 0 0 0',region:'center',store:store_printerAccess,id:'grid_printerAccess',scroll:true,selModel:selModel_printerAccess,columns:[{xtype:'gridcolumn',dataIndex:'id',text:'ID',hidden:true,hideable:false},{xtype:'gridcolumn',dataIndex:'do_print',text:'ID',hidden:true,hideable:false},{xtype:'gridcolumn',dataIndex:'printer_id',text:'ID',hidden:true,hideable:false},{xtype:'gridcolumn',dataIndex:'old_user_id',text:'ID',hidden:true,hideable:false},{xtype:'gridcolumn',dataIndex:'old_var_name',text:'ID',hidden:true,hideable:false},{xtype:'gridcolumn',dataIndex:'user_ip',text:'IP PC/User',width:120,sortable:false},{xtype:'gridcolumn',dataIndex:'var_name',text:'Tipe',width:120,sortable:false},{xtype:'gridcolumn',dataIndex:'do_print_text',text:'Do Print',width:100,sortable:false},{xtype:'gridcolumn',dataIndex:'printer_name',text:'Printer',width:120,sortable:false},{xtype:'gridcolumn',dataIndex:'printer_pin',text:'PIN',width:100,sortable:false},{xtype:'gridcolumn',dataIndex:'printer_tipe',text:'Tipe Printer',width:100,sortable:false},{xtype:'gridcolumn',dataIndex:'printer_ip',text:'IP Printer',width:200,sortable:false}],viewConfig:{stripeRows:true,forceFit:true},listeners:{itemdblclick:function(view,rec,item,index,eventObj){var getSelection=Ext.getCmp('grid_printerAccess').getSelectionModel().selected;if(getSelection.length>0){me.formType='edit';me.edit_data=rec.data;me.createWindow(me,'add_printerAccess');}}},dockedItems:[{xtype:'toolbar',dock:'top',items:['->',{text:'Add',itemId:'addButton_printerAccess',tooltip:'Add Printer Access',iconCls:'btn-add',handler:function(){me.formType='add';me.createWindow(me,'add_printerAccess');}},'-',{text:'Delete',itemId:'deleteButton_printerAccess',tooltip:'Delete Printer Access',iconCls:'btn-delete',disabled:true,handler:function(){var getSelection=Ext.getCmp('grid_printerAccess').getSelectionModel().selected;if(getSelection.length>0){me.delete_data=getSelection.items[0].data;me.deleteConfirm_printerAccess();}else{ExtApp.Msg.info('Please Select Printer Access!');}}},'-',{text:'Refresh',itemId:'refreshButton_printerAccess',tooltip:'Refresh Printer Access',iconCls:'btn-refresh',handler:function(){Ext.getCmp('grid_printerAccess').store.load();}}]}]}],listeners:{boxready:function(){store_printerAccess.load();}}});},add_printerAccess:function(me){var theApp=me.app;var desktop=theApp.getDesktop();var Titletext='Add New ';if(me.formType=='edit'){Titletext='Update ';}
var store_varPrint_masterPrinter=theApp.getStore('store_varPrint_masterPrinter',false);if(store_varPrint_masterPrinter==false){store_varPrint_masterPrinter=theApp.copyStore('master_pos','store_varPrint','store_varPrint_masterPrinter');}
var store_masterPrinter_printerAccess=theApp.getStore('store_masterPrinter_printerAccess',false);if(store_masterPrinter_printerAccess==false){store_masterPrinter_printerAccess=theApp.copyStore('master_pos','store_masterPrinter','store_masterPrinter_printerAccess');}
store_masterPrinter_printerAccess.proxy.extraParams.limit=999999;store_masterPrinter_printerAccess.proxy.extraParams.is_dropdown=1;store_masterPrinter_printerAccess.proxy.extraParams.show_all_text=0;return desktop.createWindow({id:me.id+'_add_printerAccess',title:Titletext,width:450,height:300,iconCls:'btn-add',animCollapse:false,constrainHeader:true,resizable:false,minimizable:false,maximizable:false,modal:true,border:0,layout:{type:'fit'},items:[{xtype:'form',id:'form_printerAccess',border:0,bodyPadding:10,margin:'0 0 0 0',items:[{xtype:'hidden',name:'form_type_printerAccess',value:me.formType},{xtype:'hidden',name:'id'},{xtype:'hidden',name:'old_user_ip'},{xtype:'hidden',name:'old_var_name'},{xtype:'textfield',name:'user_ip',fieldLabel:'IP User/PC',anchor:'100%',labelWidth:100,allowBlank:false},{xtype:'combobox',name:'var_name',fieldLabel:'Tipe',emptyText:'-Select-',width:250,labelWidth:100,store:store_varPrint_masterPrinter,displayField:'name',valueField:'val',queryMode:'local',allowBlank:false},{xtype:'checkbox',name:'do_print',fieldLabel:'Do Print',inputValue:'1'},{xtype:'combobox',name:'printer_name',fieldLabel:'Printer',labelSeparator:'',labelWidth:100,emptyText:'All',anchor:'100%',store:store_masterPrinter_printerAccess,queryMode:'local',displayField:'printer_name',valueField:'printer_name',typeAhead:true,minChars:1,forceSelection:true,pageSize:0,listeners:{select:function(combo,records,eOpts){var form2=Ext.getCmp('form_printerAccess').getForm();form2.findField('printer_id').setValue(records[0].data.id);form2.findField('printer_ip').setValue(records[0].data.printer_ip);form2.findField('printer_tipe').setValue(records[0].data.printer_tipe);form2.findField('printer_pin').setValue(records[0].data.printer_pin);}}},{xtype:'hidden',name:'printer_id'},{xtype:'textfield',name:'printer_ip',fieldLabel:'Printer IP',anchor:'100%',labelWidth:100,allowBlank:false},{xtype:'textfield',name:'printer_tipe',fieldLabel:'Printer Tipe',anchor:'100%',labelWidth:100,allowBlank:false},{xtype:'textfield',name:'printer_pin',fieldLabel:'Printer PIN',anchor:'100%',labelWidth:100,allowBlank:false}]}],buttons:[{text:'Save',formBind:true,id:'btnSave_printerAccess',iconCls:'btn-save',handler:function(){me.save_printerAccess();}},{text:'Cancel',iconCls:'btn-cancel',handler:function(){me.doClose(me.id+'_add_printerAccess');}}],listeners:{show:function(){var form=Ext.getCmp('form_printerAccess').getForm();if(me.formType=='edit'){form.setValues(me.edit_data);}else{form.reset();form.findField('do_print').setValue(1);}
store_masterPrinter_printerAccess.load({callback:function(){if(me.formType=='edit'){form.findField('printer_name').select(me.edit_data.printer_name);}}});}}});}});