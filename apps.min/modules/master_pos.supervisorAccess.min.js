/**
 * Filename: master_pos.supervisorAccess.js
 * Generated 2018-08-01 at 02:58:36 PM
 */
Ext.define('ExtApp.modules.master_pos.model.model_supervisorAccess',{extend:'Ext.data.Model',alias:'model_supervisorAccess',fields:[{name:'id',type:'int'},{name:'supervisor_access',type:'string'},{name:'supervisor_id',type:'string'},{name:'user_id',type:'int'},{name:'user_username',type:'string'},{name:'is_active',type:'int'},{name:'is_active_text',type:'string'}],proxy:{type:'ajax',url:appUrl+'master_pos/supervisorAccess/gridData',extraParams:{module:'master_pos',file:'supervisorAccess',action:'gridData'},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.systems.model.model_UserData',{extend:'Ext.data.Model',alias:'model_UserData',fields:[{name:'id',type:'int'},{name:'user_username',type:'string'},{name:'user_pin',type:'string'},{name:'client_id',type:'int'},{name:'client_name',type:'string'},{name:'client_structure_id',type:'int'},{name:'client_structure_name',type:'string'},{name:'role_id',type:'int'},{name:'role_name',type:'string'},{name:'user_fullname',type:'string'},{name:'user_firstname',type:'string'},{name:'user_lastname',type:'string'},{name:'user_email',type:'string'},{name:'user_phone',type:'string'},{name:'user_mobile',type:'string'},{name:'user_address',type:'string'},{name:'avatar',type:'string'},{name:'is_active',type:'int'},{name:'is_active_text',type:'string'},{name:'window_mode',type:'string'}],proxy:{type:'ajax',url:appUrl+'systems/UserData/gridData',extraParams:{},actionMethods:{read:'POST'},reader:{type:'json',root:'data',idProperty:'id',totalProperty:'totalCount'}}});Ext.define('ExtApp.modules.master_pos.store.store_supervisorAccess',{extend:'Ext.data.Store',model:'ExtApp.modules.master_pos.model.model_supervisorAccess',autoLoad:false,remoteSort:true});Ext.define('ExtApp.modules.master_pos.store.store_supervisorAccessTipe',{extend:'Ext.data.Store',fields:['val','name'],data:[{"val":"cancel_billing","name":"Cancel Billing"},{"val":"cancel_order","name":"Cancel Order"},{"val":"retur_order","name":"Retur Order"},{"val":"change_ppn","name":"Change PPN"},{"val":"change_service","name":"Change Service"},{"val":"change_dp","name":"Change DP"},{"val":"set_compliment_item","name":"Set Compliment Item"},{"val":"clear_compliment_item","name":"Clear Compliment Item"},{"val":"unmerge_billing","name":"UnMerge Billing"},{"val":"open_close_cashier","name":"Open/Close Cashier"},{"val":"unlock_screen","name":"Unlock Screen"},{"val":"approval_po","name":"Approval PO"},{"val":"change_payment_po","name":"Change Payment PO"}],autoLoad:false});Ext.define('ExtApp.modules.systems.store.store_UserData',{extend:'Ext.data.Store',model:'ExtApp.modules.systems.model.model_UserData',autoLoad:false,remoteSort:true});Ext.define("ExtApp.modules.master_pos.view.supervisorAccess",{openWindow:function(me){var theApp=me.app;var desktop=theApp.getDesktop();var store_supervisorAccess_supervisorAccess=theApp.getStore('store_supervisorAccess_supervisorAccess',false);if(store_supervisorAccess_supervisorAccess==false){store_supervisorAccess_supervisorAccess=theApp.copyStore('master_pos','store_supervisorAccess','store_supervisorAccess_supervisorAccess');}
store_supervisorAccess_supervisorAccess.proxy.extraParams.limit=25;store_supervisorAccess_supervisorAccess.proxy.extraParams.keywords='';var helperGrid=theApp.getHelper('Grid');var selModel_supervisorAccess=Ext.create('Ext.selection.CheckboxModel',{listeners:{selectionchange:function(sm,selections){Ext.getCmp('grid_supervisorAccess').down('#deleteButton_supervisorAccess').setDisabled(selections.length==0);}}});me.pagingtb_supervisorAccess=helperGrid.paging({ds:store_supervisorAccess_supervisorAccess,title:'Supervisor Access'});return desktop.createWindow({id:me.id,title:'Supervisor Access',width:800,height:480,iconCls:'icon-grid',animCollapse:false,constrainHeader:true,resizable:true,maximized:false,border:0,layout:{type:'fit'},items:[{xtype:'gridpanel',margins:'0 0 0 0',region:'center',store:store_supervisorAccess_supervisorAccess,id:'grid_supervisorAccess',scroll:true,selModel:selModel_supervisorAccess,columns:[{xtype:'gridcolumn',dataIndex:'id',text:'ID',hidden:true,hideable:false},{xtype:'gridcolumn',dataIndex:'supervisor_id',text:'ID',hidden:true,hideable:false},{xtype:'gridcolumn',dataIndex:'user_username',text:'User',width:200},{xtype:'gridcolumn',dataIndex:'supervisor_access',text:'Name',width:200},{xtype:'gridcolumn',dataIndex:'is_active_text',text:'Status Active',width:100}],viewConfig:{stripeRows:true,forceFit:true},listeners:{itemdblclick:function(view,rec,item,index,eventObj){var getSelection=Ext.getCmp('grid_supervisorAccess').getSelectionModel().selected;if(getSelection.length>0){me.formType='edit';me.edit_data=rec.data;me.createWindow(me,'add_supervisorAccess');}}},bbar:me.pagingtb_supervisorAccess,dockedItems:[{xtype:'toolbar',dock:'top',items:[{xtype:'textfield',name:'keywords',id:'keywords_supervisorAccess',width:200,labelSeparator:'',emptyText:'Keywords: Supervisor Access',anchor:'100%',listeners:{specialkey:function(field,e){if(e.getKey()==e.ENTER){me.search_supervisorAccess();}}}},{xtype:'button',text:'Search',itemId:'btnFilterSearch_supervisorAccess',tooltip:'Search',iconCls:'btn-search',handler:function(){me.search_supervisorAccess();}},{xtype:'button',text:'Reset',itemId:'btnResetFilterSearch_supervisorAccess',tooltip:'Reset',iconCls:'btn-reset',handler:function(){me.search_supervisorAccess(true);}},'->',{text:'Add',itemId:'addButton_supervisorAccess',tooltip:'Add New Master Table',iconCls:'btn-add',handler:function(){me.formType='add';me.createWindow(me,'add_supervisorAccess');}},'->',{text:'Add',itemId:'addButton_supervisorAccess',tooltip:'Add Supervisor Access',iconCls:'btn-add',handler:function(){me.formType='add';me.createWindow(me,'add_supervisorAccess');}},'-',{text:'Delete',itemId:'deleteButton_supervisorAccess',tooltip:'Delete Supervisor Access',iconCls:'btn-delete',disabled:true,handler:function(){var getSelection=Ext.getCmp('grid_supervisorAccess').getSelectionModel().selected;if(getSelection.length>0){me.delete_data=getSelection.items[0].data;me.deleteConfirm_supervisorAccess();}else{ExtApp.Msg.info('Please Select Supervisor Access!');}}},]}]}],listeners:{boxready:function(){me.search_supervisorAccess();}}});},add_supervisorAccess:function(me){var theApp=me.app;var desktop=theApp.getDesktop();var Titletext='Add New ';if(me.formType=='edit'){Titletext='Update ';}
var store_UserData_supervisorAccess=theApp.getStore('store_UserData_supervisorAccess',false);if(store_UserData_supervisorAccess==false){store_UserData_supervisorAccess=theApp.copyStore('systems','store_UserData','store_UserData_supervisorAccess');}
store_UserData_supervisorAccess.proxy.extraParams.limit=999999;store_UserData_supervisorAccess.proxy.extraParams.is_dropdown=1;store_UserData_supervisorAccess.proxy.extraParams.show_all_text=0;var store_supervisorAccessTipe_supervisorAccess=theApp.getStore('store_supervisorAccessTipe_supervisorAccess',false);if(store_supervisorAccessTipe_supervisorAccess==false){store_supervisorAccessTipe_supervisorAccess=theApp.copyStore('master_pos','store_supervisorAccessTipe','store_supervisorAccessTipe_supervisorAccess');}
return desktop.createWindow({id:me.id+'_add_supervisorAccess',title:Titletext,width:450,height:180,iconCls:'btn-add',animCollapse:false,constrainHeader:true,resizable:false,minimizable:false,maximizable:false,modal:true,border:0,layout:{type:'fit'},items:[{xtype:'form',id:'form_supervisorAccess',border:0,bodyPadding:10,margin:'0 0 0 0',items:[{xtype:'hidden',name:'form_type_supervisorAccess',value:me.formType},{xtype:'hidden',name:'id'},{xtype:'hidden',name:'supervisor_id'},{xtype:'hidden',name:'user_id'},{xtype:'combobox',name:'user_username',fieldLabel:'User',labelSeparator:'',labelWidth:100,emptyText:'All',anchor:'100%',store:store_UserData_supervisorAccess,queryMode:'local',displayField:'user_username',valueField:'user_username',typeAhead:true,minChars:1,forceSelection:true,pageSize:0,listeners:{select:function(combo,records,eOpts){var form2=Ext.getCmp('form_supervisorAccess').getForm();form2.findField('user_id').setValue(records[0].data.id);form2.findField('user_username').setValue(records[0].data.user_username);}}},{xtype:'combobox',name:'supervisor_access',fieldLabel:'Access',emptyText:'-Select-',anchor:'100%',labelWidth:100,store:store_supervisorAccessTipe_supervisorAccess,displayField:'name',valueField:'val',queryMode:'local',allowBlank:false},{xtype:'checkbox',name:'is_active',fieldLabel:'Status Active',inputValue:'1'}]}],buttons:[{text:'Save',formBind:true,id:'btnSave_supervisorAccess',iconCls:'btn-save',handler:function(){me.save_supervisorAccess();}},{text:'Cancel',iconCls:'btn-cancel',handler:function(){me.doClose(me.id+'_add_supervisorAccess');}}],listeners:{show:function(){var form=Ext.getCmp('form_supervisorAccess').getForm();if(me.formType=='edit'){form.setValues(me.edit_data);}else{form.reset();form.findField('is_active').setValue(1);}
store_UserData_supervisorAccess.load({callback:function(){if(me.formType=='edit'){form.findField('user_username').select(me.edit_data.user_username);}}});}}});},setupSupervisorAccess:function(me){var theApp=me.app;var desktop=theApp.getDesktop();var Titletext='Setup Access ';return desktop.createWindow({id:me.id+'_setupSupervisorAccess',title:Titletext,width:450,height:280,iconCls:'btn-gear',animCollapse:false,constrainHeader:true,resizable:false,minimizable:false,maximizable:false,modal:true,border:0,layout:{type:'fit'},items:[{xtype:'form',id:'form_setupSupervisorAccess',width:450,height:280,border:false,bodyBorder:false,bodyPadding:10,margin:'0 0 0 0',fieldDefaults:{labelWidth:130,labelSeparator:'',msgTarget:'side',autoFitErrors:false},items:[{xtype:'panel',defaultType:'textfield',border:0,height:250,layout:{type:'border'},items:[{xtype:'panel',flex:1,border:0,region:'center',layout:'auto',items:[{xtype:'checkbox',name:'open_close_cashier',fieldLabel:'Open/Close Cashier',inputValue:'1'},{xtype:'checkbox',name:'cancel_billing',fieldLabel:'Cancel Billing',inputValue:'1'},{xtype:'checkbox',name:'cancel_order',fieldLabel:'Cancel Order',inputValue:'1'},{xtype:'checkbox',name:'retur_order',fieldLabel:'Retur Order',inputValue:'1'},{xtype:'checkbox',name:'unmerge_billing',fieldLabel:'UnMerge Billing',inputValue:'1'}]},{xtype:'panel',flex:1,border:0,region:'west',layout:'auto',items:[{xtype:'checkbox',name:'change_ppn',fieldLabel:'Change Tax/PPN',inputValue:'1'},{xtype:'checkbox',name:'change_service',fieldLabel:'Change Service',inputValue:'1'},{xtype:'checkbox',name:'change_dp',fieldLabel:'Set DownPayment',inputValue:'1'},{xtype:'checkbox',name:'set_compliment_item',fieldLabel:'Set Compliment',inputValue:'1'},{xtype:'checkbox',name:'clear_compliment_item',fieldLabel:'Clear Compliment',inputValue:'1'},{xtype:'checkbox',name:'approval_po',fieldLabel:'Approval PO',inputValue:'1'}]}]}]}],buttons:[{text:'Save Setup',formBind:true,id:'btnSaveSetup_supervisorAccess',iconCls:'btn-save',handler:function(){me.saveSetupSupervisorAccess();}},{text:'Cancel',iconCls:'btn-cancel',handler:function(){me.doClose(me.id+'_setupSupervisorAccess');}}],listeners:{show:function(){me.loadSetupSupervisorAccess();}}});}});